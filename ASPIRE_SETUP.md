# Aspire Bank Integration Setup

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Aspire Bank –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤ Aspire –≤ YNAB –±—é–¥–∂–µ—Ç Innerly. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É: **Aspire Bank ‚Üí YNAB Innerly**.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—á–µ—Ç–∞ Aspire Bank

1. **USD —Å—á–µ—Ç** (`9d6d2e6b-4833-4b73-bdeb-a80718916cb3`)
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ YNAB Innerly USD Account (`c0f153ff-5ca4-4697-ac36-4d96460d9784`)
   - –ë–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç—ã

2. **EUR —Å—á–µ—Ç** (`9d6c69a5-abea-4895-9601-1a0cfeb63473`)
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ YNAB Innerly EUR Account (`b3d64d0f-8daa-4d90-9863-2c64cbee1f8c`)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è EUR ‚Üí USD –ø–æ –∫—É—Ä—Å—É –∏–∑ Supabase

3. **SGD —Å—á–µ—Ç** (`9d6c59f9-dd95-43c2-b333-56c2b6e38bc8`)
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ YNAB Innerly SGD Account (`3ccfd1e4-d8c2-41f5-b2f5-a3923155c707`)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è SGD ‚Üí USD –ø–æ –∫—É—Ä—Å—É –∏–∑ Supabase

### –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä

Aspire Bank API —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã:

- **URL**: `https://aspire-proxy-render.onrender.com`
- **Endpoints**:
  - `/aspire?account_id={id}&start_date={date}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - `/ping` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  - `/token` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
ASPIRE_PROXY_URL=https://aspire-proxy-render.onrender.com
```

### 2. –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –≤ Supabase

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `exchange_rates` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫—É—Ä—Å—ã USD ‚Üí SGD:

```sql
UPDATE exchange_rates 
SET usd_to_sgd = 1.29 
WHERE month = '2026-01';
```

### 3. –¢–∞–±–ª–∏—Ü–∞ –º–∞–ø–ø–∏–Ω–≥–∞

–¢–∞–±–ª–∏—Ü–∞ `aspire_transaction_mappings` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:

- `aspire_account_id` - ID —Å—á–µ—Ç–∞ –≤ Aspire
- `aspire_transaction_id` - ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Aspire
- `aspire_datetime` - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `aspire_amount` - –°—É–º–º–∞ –≤ —Ü–µ–Ω—Ç–∞—Ö (Aspire —Ñ–æ—Ä–º–∞—Ç)
- `aspire_currency` - –í–∞–ª—é—Ç–∞ (USD, EUR, SGD)
- `aspire_reference` - Reference –∏–∑ Aspire
- `ynab_budget_id` - ID –±—é–¥–∂–µ—Ç–∞ –≤ YNAB (Innerly)
- `ynab_account_id` - ID —Å—á–µ—Ç–∞ –≤ YNAB
- `ynab_transaction_id` - ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ YNAB
- `sync_status` - –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ('active', 'deleted')

## –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

1. –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ Aspire Bank –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—á–µ—Ç–∞ (USD, EUR, SGD)
2. –î–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
   - –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –º–∞–ø–ø–∏–Ω–≥
   - –ï—Å–ª–∏ –Ω–µ—Ç, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å—É–º–º—É –∏–∑ Aspire (—Ü–µ–Ω—Ç—ã) –≤ YNAB (milliunits)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤–∞–ª—é—Ç—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (EUR ‚Üí USD, SGD ‚Üí USD)
   - –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ YNAB —Å `import_id` = `ASPIRE:{account_id}:{transaction_id}`
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞–ø–ø–∏–Ω–≥ –≤ Supabase

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–ï—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –º–∞–ø–ø–∏–Ω–≥–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –°—É–º–º–∞ (`aspire_amount`)
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è (`aspire_datetime`)
- Reference (`aspire_reference`)

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ YNAB –∏ –º–∞–ø–ø–∏–Ω–≥ –≤ Supabase.

### –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–ï—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏—Å—á–µ–∑–ª–∞ –∏–∑ Aspire Bank:
1. –£–¥–∞–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ YNAB
2. –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –º–∞–ø–ø–∏–Ω–≥–∞ –Ω–∞ 'deleted'

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É–º–º

**Aspire ‚Üí YNAB:**
- Aspire –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—ã: `100` = `$1.00`
- YNAB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç milliunits: `1000` = `$1.00`
- –§–æ—Ä–º—É–ª–∞: `ynab_milliunits = aspire_cents * 10`

**–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç:**
- USD: –ë–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- EUR ‚Üí USD: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—É—Ä—Å `eur_to_usd` –∏–∑ Supabase
- SGD ‚Üí USD: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—É—Ä—Å `usd_to_sgd` –∏–∑ Supabase (–¥–µ–ª–∏–º SGD –Ω–∞ –∫—É—Ä—Å)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ Payee

- Counterparty Name –∏–∑ Aspire –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ Payee –≤ YNAB
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: –µ—Å–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "FACEBK", –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ "FACEBK"
- Memo —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ `reference` –∏–ª–∏ `counterparty_name`

## –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–±–∏–ª—å–Ω—ã–π `import_id`:
```
ASPIRE:{account_id}:{transaction_id}
```

–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ (409) –¥–æ–±–∞–≤–ª—è–µ–º timestamp:
```
ASPIRE:{account_id}:{transaction_id}:{timestamp}
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞—á–∏–Ω–∞—è —Å `SYNC_START_DATE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `2026-01-01`).

## –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```bash
npm run sync-once
```

### –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```bash
npm start
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

- `src/clients/aspire.ts` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è Aspire Bank API
- `src/services/aspireSync.ts` - –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Aspire ‚Üí YNAB
- `src/services/currency.ts` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SGD ‚Üî USD
- `src/clients/supabase.ts` - –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `aspire_transaction_mappings`

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:

```
üè¶ Starting Aspire Bank ‚Üí YNAB Innerly synchronization...

üí≥ Processing USD account...
   Fetched 150 transactions from Aspire USD
   üí∞ Creating YNAB transaction: abc123 (USD) - 50.00 USD
   ‚úÖ Created YNAB transaction for Aspire TX abc123
   üìä USD: Created 50, Updated 10, Deleted 2, Skipped 88

üí≥ Processing EUR account...
   Fetched 75 transactions from Aspire EUR
   üí∞ Creating YNAB transaction: def456 (EUR) - 45.50 USD
   ‚úÖ Created YNAB transaction for Aspire TX def456
   üìä EUR: Created 30, Updated 5, Deleted 1, Skipped 39

üí≥ Processing SGD account...
   Fetched 20 transactions from Aspire SGD
   üí∞ Creating YNAB transaction: ghi789 (SGD) - 35.20 USD
   ‚úÖ Created YNAB transaction for Aspire TX ghi789
   üìä SGD: Created 10, Updated 2, Deleted 0, Skipped 8

‚úÖ Aspire sync completed!
   Created: 90
   Updated: 17
   Deleted: 3
   Skipped: 135
```

## Troubleshooting

### –û—à–∏–±–∫–∞: "Aspire Bank not configured"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `ASPIRE_PROXY_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`

### –û—à–∏–±–∫–∞: "Could not convert {currency} to USD"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `exchange_rates` –µ—Å—Ç—å –∫—É—Ä—Å –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `usd_to_sgd` –¥–ª—è SGD —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –û—à–∏–±–∫–∞: "Aspire API error: 502"
- –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Render –º–æ–∂–µ—Ç "–∑–∞—Å—ã–ø–∞—Ç—å" –ø–æ—Å–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-30 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
- –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç 3 —Ä–∞–∑–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

### –û—à–∏–±–∫–∞: "Import ID conflict (409)"
- –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç timestamp –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–¢–æ–ª—å–∫–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: Aspire ‚Üí YNAB
2. **–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: –¢–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å `2026-01-01` –∏ –ø–æ–∑–∂–µ
3. **–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–∫—Å–∏ –Ω–∞ Render
4. **–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç**: –ú–µ—Å—è—á–Ω—ã–µ –∫—É—Ä—Å—ã, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é –≤ Supabase

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –≤–∞–ª—é—Ç Aspire Bank
- [ ] Webhook –¥–ª—è real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ polling
- [ ] Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏





















